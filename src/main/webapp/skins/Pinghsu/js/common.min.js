var Skin={init:function(){new Headroom($("header")[0],{tolerance:0,offset:70,classes:{initial:"header",pinned:"header--down",unpinned:"header--up",top:"header",notTop:"header",bottom:"header",notBottom:"header"}}).init(),Util.initPjax(function(){0===$(".post__fix").length?$("body").addClass("body--gray"):$("body").removeClass("body--gray"),$(".header__nav a").each(function(){$(".header__nav a").removeClass("current"),this.href===location.href&&(this.className="current")}),Skin._initToc()}),$(".header__nav a").each(function(){this.href===location.href&&(this.className="current")}).click(function(){$(".header__nav a").removeClass("current"),this.href===location.href&&(this.className="current")})},_initToc:function(){if(0!==$(".article__toc").length){$(".post__toc").css("left",$(".post").offset().left+$(".post").outerWidth());var s=$(".vditor-reset [id^=b3_solo_h]"),r=$(".article__toc");$(window).unbind("scroll").scroll(function(t){if(0===$(".article__toc li").length)return!1;if(72<$(window).scrollTop()){$(".post__toc").show();var e=[];s.each(function(t){e.push({id:this.id,offsetTop:this.offsetTop})});for(var i=$(window).scrollTop(),n=0,o=e.length;n<o;n++)if(i<e[n].offsetTop-20){r.find("li").removeClass("current");var a=0<n?n-1:0;r.find('a[href="#'+e[a].id+'"]').parent().addClass("current");break}i>=e[e.length-1].offsetTop-20&&(r.find("li").removeClass("current"),r.find("li:last").addClass("current"))}else $(".post__toc").hide()}),$(window).scroll()}},_initShare:function(){var t=$(".post__share"),e=t.find(".post__code"),i=e.data("url"),n=e.data("avatar"),o=encodeURIComponent(e.data("title")+" - "+e.data("blogtitle")),a=encodeURIComponent(i),s={};s.weibo="http://v.t.sina.com.cn/share/share.php?title="+o+"&url="+a+"&pic="+n,s.qqz="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+a+"&sharesource=qzone&title="+o+"&pics="+n,s.twitter="https://twitter.com/intent/tweet?status="+o+" "+a,t.find("span").click(function(){var t=$(this).data("type");if(t)return"wechat"===t?(0===e.find("canvas").length?$.ajax({method:"GET",url:Label.staticServePath+"/js/lib/jquery.qrcode.min.js",dataType:"script",cache:!0,success:function(){e.qrcode({width:128,height:128,text:i})}}):e.find("canvas").slideToggle(),!1):void window.open(s[t],"_blank","top=100,left=200,width=648,height=618")})},initArticle:function(){new Headroom($(".post__fix")[0],{tolerance:0,offset:48,classes:{initial:"post__fix",pinned:"post__fix--pinned",unpinned:"post__fix--unpinned",top:"post__fix",notTop:"post__fix",bottom:"post__fix",notBottom:"post__fix"}}).init(),Skin._initShare(),Skin._initToc()}};Skin.init();